<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<title>Student's dashboard</title>
<object th:include="common/header :: common-header" th:remove="tag"></object>
<style>
</style>
</head>

<body>

	<div th:replace="common/navbar :: common-navbar"></div>

	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<div class="course-panel panel panel-default animated fadeInDown">
					<div class="panel-heading">
						<a id="btnOpenSessionList" data-toggle="modal" data-target="#markParticipationPanel"
							class="pull-right btn btn-primary btn-xs small-corner-btn" href="#"><i
							class="fa fa-check-square"></i> Mark participation</a><a
							class="pull-right btn btn-primary btn-xs small-corner-btn" th:href="@{/student}"><i
							class="fa fa-chevron-circle-left"></i>Back</a><strong th:text="${course.name}"></strong>
					</div>
					<div class="panel-body">
						<table class="table table-condensed">
							<tr>
								<td>Course's description</td>
								<td colspan="3" th:text="${course.description}"></td>
							</tr>
							<tr>
								<td>Lecturer</td>
								<td colspan="3"><strong th:text="${teacher.firstname}+' '+${teacher.lastname}"></strong></td>
							</tr>
							<tr>
								<td>Email</td>
								<td colspan="3" th:text="${teacher.email}"></td>
							</tr>
							<tr>
								<td class="col-md-4">Start date</td>
								<td class="col-md-3" th:text="${course.startDate}"></td>
								<td class="col-md-3">End date</td>
								<td class="col-md-2" th:text="${course.endDate}"></td>
							</tr>
							<tr>
								<td>Start enrolling date</td>
								<td th:text="${course.startEnrollDate}"></td>
								<td>End enrolling date</td>
								<td th:text="${course.endEnrollDate}"></td>
							</tr>
						</table>
						<div class="jumbotron">
							<h3>Course's content</h3>
							<p>The content of the course will be placed here !</p>
							<p>Content is different between courses and can be edited by teacher</p>
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>

	<!-- Modal -->
	<div id="markParticipationPanel" class="modal fade" role="dialog">
		<div class="modal-dialog model-lg">

			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Session history</h4>
				</div>
				<div th:if="${noSessionFound} == false" class="modal-body">
					<table class="table table-bordered">
						<thead>
							<tr>
								<th class="text-center">#</th>
								<th>Session name</th>
								<th class="text-center">Start time</th>
								<th class="text-center">End time</th>
								<th class="text-center">Date</th>
								<th>Category</th>
								<th class="text-center">Participation</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="instance,iterationStatus : ${participationList}">
								<td class="text-center" th:text="${iterationStatus.count}"></td>
								<td th:text="${instance.key.name}"></td>
								<td class="text-center" th:text="${instance.key.startTime}"></td>
								<td class="text-center" th:text="${instance.key.endTime}"></td>
								<td class="text-center" th:text="${instance.key.sessionDate}"></td>
								<td th:text="${instance.key.sessionCategory}"></td>
								<td class="text-center"><i th:if="${instance.value == true}" class="fa fa-check"></i></td>
							</tr>
							<tr>
								<td class="text-center" colspan="6"><strong>Total</strong></td>
								<td class="text-center"><strong th:text="${participationRate}"></strong></td>
							</tr>
						</tbody>
					</table>
					<div>
						<form th:if="${allowMark} == true" class="form-inline form-group-sm pull-right" th:action="@{/student/course/} + ${course.id} + '/mark-participation'" method="post">
							<div class="form-group">
								<label for="inputPassword">Password</label>
								<input type="password" class="form-control" id="inputPassword" name="sessionPassword" placeholder="Password" />
							</div>
							<button type="submit" class="btn btn-default">Mark participation</button>
						</form>
					</div>
					
				</div>
				
				<div th:if="${noSessionFound} == true" class="modal-body">
					<h4>No session available !</h4>
				</div>
				
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>

		</div>
	</div>

	<div th:replace="common/footer :: common-footer"></div>
	<div th:replace="common/footer :: footer-scripts"></div>
	<script type="text/javascript" th:inline="javascript">
		$(document).ready(function() {
			/*<![CDATA[*/
			var url = /*[[@{~/student/course/}+${course.id}+'/reload']]*/"";
			/*]]>*/
			
			$('#btnOpenSessionList').click(function(){
				
				$('#markParticipationPanel').load(url);
				
			});
		});
	</script>

</body>
</html>